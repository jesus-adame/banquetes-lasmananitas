{include file=$inc|cat:'header.html'}
<style>
.graph {
   display: inline-block;
   width: 600px;
   max-width: 49%;
   height: auto;
}
.img-cont {
   text-align: center;
}
.form-cotizacion {
   display: inline-block;
   margin-bottom: 20px;
   min-width: 330px;
}
.calendar {
   padding-top: 20px;
   display: inline-block;
}
</style>

<!-- FORMULARIO MENU -->
{include file=$temp|cat:'cotizacion/m_menu.html'}
{include file=$temp|cat:'cotizacion/modal-info.html'}

<main>
   <div class="content m-auto-x row-between">

      <!-- FORMULARIO DE COTIZACIÃ“N -->
      {include file=$temp|cat:'cotizacion/form_cot.html'}

      <!-- LADO DERECHO -->
      <div class="img-cont col-xs-12 col-md-8">
         <!-- BARRA DE HERRAMIENTAS -->
         <div class="tools-bar row-between col-xs-12 col-md-10">
            Herramientas
            <ul class="tools-menu row-right">
               <li><a id="cot_ajustes" class="btn-tools" href="?view=precios"><i class="fas fa-wrench"></i> Ajustes</a></li>
            </ul>
         </div>
         <!-- CALENDARIO DE EVENTOS -->
         <div id="calendar" class="calendar col-xs-12 col-md-10"></div>
      </div>
   </div>
</main>

<script src="public/js/Modal.js"></script>
<script src="public/js/cotizacion/ajax_req.js"></script>
<script src="public/js/cotizacion/onload.js"></script>
<script src="public/js/cotizacion/events.js"></script>
<script src="public/js/cotizacion/print-functions.js"></script>
<script src="public/js/cotizacion/functions.js"></script>
<script>
$('#calendar').fullCalendar({
   header: {
      left: 'month,agendaWeek,agendaDay',
      center: 'title',
      right: 'today, prev,next'
   },
   defaultView: 'month',
   allDaySlot: false,
   eventLimit: true,
   events: 'core/ajax/eventosAjaxController.php',
   navLinks: true,
   nowIndicator: true,
   showNonCurrentDates: false,
   dayClick: function(date, jsEvent, view) {
      d_init.value = date.format()
      d_end.value = date.format()
   },
   eventClick: function (calEvent, jsEvent, view) {
      printModalCotizacion(calEvent)

      data = new FormData;
      data.append('evento_id', calEvent.id_evento)
      data.append('action', 'obtener_cotizaciones')

      ajaxRequest('cotizacion', data)
         .then(dataJson => {
            printTableCotizacion(dataJson.data)
            modal_info.style.display = 'block'
         })
   },
   views: {
      agendaWeek: { // name of view
      titleFormat: 'D MMM YYYY',
      columnHeaderFormat: 'ddd D'
      }
   }
})
</script>
{include file=$inc|cat:'footer.html'}